Version 4
SHEET 1 880 788
WIRE -1968 -576 -1968 -592
WIRE -1792 -576 -1968 -576
WIRE -1744 -576 -1792 -576
WIRE -1696 -576 -1744 -576
WIRE -1616 -576 -1696 -576
WIRE -1472 -576 -1520 -576
WIRE -1360 -576 -1392 -576
WIRE -1280 -576 -1360 -576
WIRE -1136 -576 -1280 -576
WIRE -800 -576 -1136 -576
WIRE -1792 -544 -1792 -576
WIRE -1696 -544 -1696 -576
WIRE -1360 -544 -1360 -576
WIRE -1280 -544 -1280 -576
WIRE -1744 -528 -1744 -576
WIRE -1136 -464 -1136 -576
WIRE -528 -464 -560 -464
WIRE -1360 -448 -1360 -480
WIRE -1312 -448 -1360 -448
WIRE -1280 -448 -1280 -464
WIRE -1280 -448 -1312 -448
WIRE -1184 -448 -1280 -448
WIRE -560 -432 -560 -464
WIRE -528 -432 -560 -432
WIRE -1792 -416 -1792 -480
WIRE -1744 -416 -1744 -464
WIRE -1744 -416 -1792 -416
WIRE -1696 -416 -1696 -464
WIRE -1696 -416 -1744 -416
WIRE -1600 -416 -1600 -528
WIRE -1600 -416 -1696 -416
WIRE -1568 -416 -1600 -416
WIRE -1136 -336 -1136 -368
WIRE -944 -336 -1136 -336
WIRE -1568 -304 -1568 -416
WIRE -1040 -304 -1568 -304
WIRE -1312 -288 -1312 -448
WIRE -1136 -288 -1312 -288
WIRE -800 -272 -800 -576
WIRE -640 -272 -800 -272
WIRE -560 -272 -560 -432
WIRE -560 -272 -640 -272
WIRE -528 -272 -560 -272
WIRE -480 -256 -480 -352
WIRE -432 -256 -480 -256
WIRE -944 -192 -944 -336
WIRE -640 -192 -944 -192
WIRE -432 -192 -432 -256
WIRE -432 -192 -640 -192
WIRE -1888 -176 -1920 -176
WIRE -1824 -176 -1888 -176
WIRE -1664 -176 -1760 -176
WIRE -1632 -176 -1664 -176
WIRE -1520 -176 -1568 -176
WIRE -1456 -176 -1520 -176
WIRE -1312 -176 -1392 -176
WIRE 496 -176 336 -176
WIRE -1312 -160 -1312 -176
WIRE -432 -160 -432 -192
WIRE -1920 -128 -1920 -176
WIRE 496 -128 496 -176
WIRE -1664 -112 -1664 -176
WIRE -1520 -112 -1520 -176
WIRE -432 -96 -432 -160
WIRE 32 0 -160 0
WIRE -1136 112 -1136 -288
WIRE -160 112 -160 0
WIRE -1664 128 -1664 -48
WIRE 32 128 32 0
WIRE 96 128 32 128
WIRE 336 128 336 -176
WIRE 336 128 288 128
WIRE 448 224 288 224
WIRE 464 224 448 224
WIRE -16 240 -16 -64
WIRE 0 240 -16 240
WIRE -1520 256 -1520 -48
WIRE -1504 256 -1520 256
WIRE -1040 272 -1040 -304
WIRE 0 272 0 240
WIRE -1504 288 -1504 256
WIRE 464 352 464 224
WIRE -1136 368 -1136 192
WIRE -1328 448 -1616 448
WIRE -1184 448 -1200 448
WIRE -1328 496 -1328 448
WIRE -1136 496 -1136 464
WIRE -1136 496 -1328 496
WIRE -1040 528 -1040 352
WIRE -1328 608 -1328 496
WIRE -1264 608 -1328 608
WIRE -1088 608 -1264 608
WIRE -1264 640 -1264 608
WIRE -1040 640 -1040 624
FLAG 464 432 0
FLAG 496 -48 0
FLAG 448 224 out
FLAG 96 224 0
FLAG -160 192 0
FLAG -1920 -48 0
FLAG -1312 -176 cp_out
FLAG 0 352 0
FLAG -1888 -176 100v
FLAG -1312 -96 100v
FLAG -1664 208 0
FLAG -1504 368 0
FLAG -480 -544 100v
FLAG -432 -16 0
FLAG -1968 -592 cp_out
FLAG -1616 528 0
FLAG -1696 656 0
FLAG -1696 576 5v
FLAG -1200 448 5v
FLAG -1040 640 0
FLAG -432 -160 100v
SYMBOL Optos\\PC817A 192 176 R0
SYMATTR InstName U1
SYMBOL res 448 336 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL voltage 496 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -160 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 0 0 0 .005 .01)
SYMBOL schottky -1824 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -1632 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -1680 -112 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL voltage -1920 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 100
SYMBOL cap -1328 -160 R0
SYMATTR InstName C2
SYMATTR Value 4µ7
SYMBOL schottky -1456 -160 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -1536 -112 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL voltage 0 256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 5 .005 0 0 .005 .01)
SYMBOL voltage -1664 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 0 0 0 .00005 .0001)
SYMBOL voltage -1504 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value PULSE(0 5 .00005 0 0 .00005 .0001)
SYMBOL nmos -528 -544 R0
SYMATTR InstName M1
SYMATTR Value BSC16DN25NS3
SYMBOL res -448 -112 R0
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL pmos -1184 -368 M180
SYMATTR InstName M2
SYMATTR Value IRFP9240
SYMBOL res -1296 -560 R0
SYMATTR InstName R4
SYMATTR Value 20k
SYMBOL nmos -1184 368 R0
SYMATTR InstName M3
SYMATTR Value BSP89
SYMBOL zener -1344 -480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D4
SYMATTR Value BZX84B15VL
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -1152 96 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL voltage -1616 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PWL(0 0 .01 0 .011 5 .02 5 .021 0)
SYMBOL res -1376 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res -656 -288 R0
SYMATTR InstName R6
SYMATTR Value 50k
SYMBOL pmos -1520 -528 M270
SYMATTR InstName M4
SYMATTR Value IRFP9240
SYMBOL res -1712 -560 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL zener -1776 -480 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value BZX84B15VL
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL nmos -1088 528 R0
SYMATTR InstName M5
SYMATTR Value BSP89
SYMBOL res -1056 256 R0
SYMATTR InstName R8
SYMATTR Value 100k
SYMBOL voltage -1696 560 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 5
SYMBOL nmos -528 -352 M180
SYMATTR InstName M6
SYMATTR Value BSC16DN25NS3
SYMBOL cap -1760 -528 R0
SYMATTR InstName C4
SYMATTR Value 100n
TEXT -194 456 Left 2 !.tran 50m
TEXT 208 -352 Left 2 !.ic V(cp_out) = 0
