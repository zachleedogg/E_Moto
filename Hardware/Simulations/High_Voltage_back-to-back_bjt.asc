Version 4
SHEET 1 9788 9280
WIRE -1968 -928 -1968 -944
WIRE -1808 -928 -1968 -928
WIRE -1392 -928 -1728 -928
WIRE -896 -928 -1392 -928
WIRE 656 -752 -208 -752
WIRE -1392 -736 -1392 -928
WIRE -416 -736 -416 -784
WIRE -256 -736 -416 -736
WIRE -416 -704 -416 -736
WIRE -208 -704 -208 -752
WIRE -256 -688 -256 -736
WIRE -1392 -576 -1392 -656
WIRE -416 -576 -416 -624
WIRE -256 -576 -256 -640
WIRE -256 -576 -416 -576
WIRE 1744 -544 1728 -544
WIRE 1760 -544 1744 -544
WIRE -896 -528 -896 -928
WIRE 1728 -512 1728 -544
WIRE -1392 -480 -1392 -496
WIRE -1328 -480 -1392 -480
WIRE -1232 -480 -1264 -480
WIRE -1104 -480 -1152 -480
WIRE -992 -480 -1024 -480
WIRE -960 -480 -992 -480
WIRE 1680 -416 1344 -416
WIRE 1344 -384 1344 -416
WIRE 1728 -384 1728 -432
WIRE -896 -368 -896 -432
WIRE -800 -368 -896 -368
WIRE -768 -368 -800 -368
WIRE -640 -368 -688 -368
WIRE -416 -368 -416 -576
WIRE -160 -368 -416 -368
WIRE 128 -368 -160 -368
WIRE 432 -368 128 -368
WIRE 1680 -368 1680 -416
WIRE -416 -352 -416 -368
WIRE -160 -352 -160 -368
WIRE 128 -352 128 -368
WIRE 432 -352 432 -368
WIRE 2048 -336 2016 -336
WIRE 2144 -336 2048 -336
WIRE -896 -288 -896 -368
WIRE 1344 -288 1344 -304
WIRE 1552 -288 1344 -288
WIRE 1680 -288 1680 -320
WIRE 1680 -288 1552 -288
WIRE 2016 -288 2016 -336
WIRE 2144 -288 2144 -336
WIRE -640 -272 -640 -368
WIRE -512 -272 -640 -272
WIRE -464 -272 -512 -272
WIRE -208 -272 -464 -272
WIRE 80 -272 -208 -272
WIRE 384 -272 80 -272
WIRE 1728 -256 1728 -304
WIRE -1392 -240 -1392 -480
WIRE -1296 -240 -1392 -240
WIRE -1168 -240 -1216 -240
WIRE -1056 -240 -1088 -240
WIRE -960 -240 -1056 -240
WIRE -800 -192 -896 -192
WIRE -640 -192 -800 -192
WIRE -416 -192 -416 -256
WIRE -416 -192 -640 -192
WIRE -160 -192 -160 -256
WIRE -160 -192 -416 -192
WIRE 128 -192 128 -256
WIRE 128 -192 -160 -192
WIRE 432 -192 432 -256
WIRE 432 -192 128 -192
WIRE -416 -160 -416 -192
WIRE -160 -160 -160 -192
WIRE 128 -160 128 -192
WIRE 432 -160 432 -192
WIRE -512 -144 -512 -272
WIRE -464 -144 -512 -144
WIRE -208 -144 -464 -144
WIRE 80 -144 -208 -144
WIRE 384 -144 80 -144
WIRE -2784 -128 -2816 -128
WIRE -2720 -128 -2784 -128
WIRE -2560 -128 -2656 -128
WIRE -2528 -128 -2560 -128
WIRE -2416 -128 -2464 -128
WIRE -2352 -128 -2416 -128
WIRE -2256 -128 -2256 -208
WIRE -2256 -128 -2288 -128
WIRE -2240 -128 -2256 -128
WIRE -2192 -128 -2240 -128
WIRE -2080 -128 -2080 -208
WIRE -2080 -128 -2128 -128
WIRE -1984 -128 -2080 -128
WIRE -1984 -112 -1984 -128
WIRE -2816 -80 -2816 -128
WIRE -2560 -64 -2560 -128
WIRE -2416 -64 -2416 -128
WIRE -2240 -48 -2240 -128
WIRE -416 16 -416 -64
WIRE -416 16 -480 16
WIRE -240 16 -416 16
WIRE -208 16 -240 16
WIRE -160 16 -160 -64
WIRE -160 16 -208 16
WIRE 128 16 128 -64
WIRE 128 16 -160 16
WIRE 432 16 432 -64
WIRE 432 16 128 16
WIRE -480 32 -480 16
WIRE -2560 96 -2560 80
WIRE -2512 96 -2560 96
WIRE -2416 96 -2416 80
WIRE -2416 96 -2448 96
WIRE -240 96 -240 16
WIRE -2560 144 -2560 96
WIRE -2240 144 -2240 96
WIRE -2240 144 -2560 144
WIRE -2560 176 -2560 144
WIRE -416 176 -416 16
WIRE -1728 224 -1744 224
WIRE -1536 224 -1552 224
WIRE -1392 256 -1392 -240
WIRE -1680 336 -1680 304
WIRE -1680 336 -1920 336
WIRE -1488 336 -1488 304
WIRE -1488 336 -1680 336
WIRE -1440 336 -1488 336
WIRE -800 416 -928 416
WIRE -592 416 -800 416
WIRE -544 416 -592 416
WIRE -928 432 -928 416
WIRE -800 432 -800 416
WIRE -1552 464 -1552 224
WIRE -1392 464 -1552 464
WIRE -544 464 -544 416
WIRE -592 480 -640 480
WIRE -800 544 -800 512
WIRE -640 544 -640 480
WIRE -640 544 -800 544
WIRE -800 576 -800 544
WIRE -1744 656 -1744 224
WIRE -848 656 -1744 656
WIRE -1744 720 -1744 656
WIRE -544 720 -544 560
WIRE -544 720 -640 720
WIRE -320 720 -544 720
WIRE -192 720 -320 720
WIRE 128 720 -112 720
WIRE 448 720 336 720
WIRE 656 720 656 -752
WIRE 656 720 448 720
WIRE -1392 736 -1392 464
WIRE -1120 736 -1392 736
WIRE -928 736 -928 512
WIRE -928 736 -1120 736
WIRE -816 736 -928 736
WIRE -800 736 -800 672
WIRE -800 736 -816 736
WIRE -704 736 -800 736
WIRE -624 752 -640 752
WIRE -608 752 -624 752
WIRE -320 752 -320 720
WIRE 128 752 128 720
WIRE -608 768 -608 752
WIRE -816 848 -816 736
WIRE -768 848 -816 848
WIRE -624 848 -624 752
WIRE -624 848 -688 848
WIRE -608 880 -608 848
WIRE -544 880 -608 880
FLAG -2816 0 0
FLAG -1984 -128 cp_out
FLAG -2784 -128 100v
FLAG -1984 -48 100v
FLAG -2560 256 0
FLAG -416 -784 100v
FLAG -416 256 0
FLAG -1968 -944 cp_out
FLAG -1744 800 0
FLAG -2224 736 0
FLAG -2224 656 5v
FLAG -208 -624 0
FLAG -672 768 0
FLAG -2320 736 0
FLAG -2320 656 2v5
FLAG -544 880 2v5
FLAG -320 816 0
FLAG -2448 736 0
FLAG -2448 656 3v3
FLAG -592 416 3v3
FLAG -672 704 5v
FLAG -208 16 out
FLAG 912 80 0
FLAG 912 -16 0
FLAG 1104 -16 0
FLAG 1104 80 0
FLAG -992 -480 b_q1
FLAG -1056 -240 b_q2
FLAG -800 -368 gate
FLAG 1552 -288 0
FLAG -1120 736 nFault
FLAG -480 96 0
FLAG -2512 112 0
FLAG 2016 -208 0
FLAG 2144 -224 0
FLAG 2464 -144 0
FLAG 2464 144 0
FLAG 2464 64 R_Value
FLAG 2464 -224 out
FLAG 2048 -336 out
FLAG 1728 -256 0
FLAG 1744 -544 out
FLAG -1392 352 0
FLAG -1920 416 0
FLAG -1680 208 3v3
FLAG -1488 208 3v3
FLAG -800 -192 source
FLAG 448 720 amp_raw
FLAG 128 832 0
FLAG -240 160 0
SYMBOL schottky -2720 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL schottky -2528 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -2576 -64 R0
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL voltage -2816 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 100
SYMBOL cap -2000 -112 R0
SYMATTR InstName C2
SYMATTR Value 4µ7
SYMBOL schottky -2352 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -2432 -64 R0
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL voltage -2560 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 0 {t_edge} {t_edge} {1/2/FREQ-t_edge} {1/FREQ})
SYMBOL res -432 160 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL nmos -1440 256 R0
SYMATTR InstName M3
SYMATTR Value BSP89
SYMBOL voltage -1744 704 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value PULSE(0 3.3 .01 1u 1u 5m 10m 5)
SYMBOL res -656 -288 R0
SYMATTR InstName R6
SYMATTR Value 500k
SYMBOL voltage -2224 640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 7
SYMBOL res -432 -720 R0
SYMATTR InstName R10
SYMATTR Value .0005
SYMBOL e -208 -720 R0
SYMATTR InstName E1
SYMATTR Value 200
SYMBOL Opamps\\opamp2 -672 672 M0
SYMATTR InstName U2
SYMATTR Value LM2903B
SYMBOL voltage -2320 640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V9
SYMATTR Value 2.5
SYMBOL nmos -848 576 R0
SYMATTR InstName M7
SYMATTR Value BSP89
SYMBOL pmos -592 560 M180
SYMATTR InstName M8
SYMATTR Value BSS84
SYMBOL res -96 704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res -816 416 R0
SYMATTR InstName R12
SYMATTR Value 10k
SYMBOL cap -336 752 R0
SYMATTR InstName C5
SYMATTR Value .1n
SYMBOL res -944 416 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL voltage -2448 640 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V11
SYMATTR Value 3.3
SYMBOL nmos -464 -352 R0
SYMATTR InstName M14
SYMATTR Value FDB2532
SYMBOL res -672 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1
SYMBOL res -1824 -912 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value .001
SYMBOL Optos\\PC817A 1008 32 R0
SYMATTR InstName U1
SYMBOL npn -960 -528 R0
SYMATTR InstName Q1
SYMATTR Value 2N5550
SYMBOL pnp -960 -192 M180
SYMATTR InstName Q2
SYMATTR Value 2N5401
SYMBOL res -1120 -464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res -1072 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -1408 -592 R0
SYMATTR InstName R8
SYMATTR Value 32k
SYMBOL nmos -208 -352 R0
SYMATTR InstName M1
SYMATTR Value FDB2532
SYMBOL nmos 80 -352 R0
SYMATTR InstName M2
SYMATTR Value FDB2532
SYMBOL nmos 384 -352 R0
SYMATTR InstName M4
SYMATTR Value FDB2532
SYMBOL nmos -464 -64 M180
SYMATTR InstName M6
SYMATTR Value FDB2532
SYMBOL nmos -208 -64 M180
SYMATTR InstName M9
SYMATTR Value FDB2532
SYMBOL nmos 80 -64 M180
SYMATTR InstName M10
SYMATTR Value FDB2532
SYMBOL nmos 384 -64 M180
SYMATTR InstName M11
SYMATTR Value FDB2532
SYMBOL sw 1728 -288 M180
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL voltage 1344 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PWL(0 0 22m 0 22.020m 5 24m 0)
SYMBOL ind 1712 -528 R0
SYMATTR InstName L1
SYMATTR Value 330n
SYMATTR SpiceLine Rser=1m
SYMBOL schottky -464 96 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D9
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Digital\\inv -2512 32 R0
SYMATTR InstName A1
SYMATTR SpiceLine Vhigh=5V
SYMBOL diode 2128 -288 R0
SYMATTR InstName D5
SYMATTR Value Didl
SYMBOL current 2016 -208 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PWL(0 0 25m 0 25.005m 40)
SYMBOL bv 2464 -240 R0
SYMATTR InstName B1
SYMATTR Value V={V(R_Value)}*I(B1)
SYMBOL voltage 2464 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PWL(10m 100k 10.001m {start_res} 15m {end_res} 16m 100k)
SYMBOL res -624 752 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -672 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL res -1136 -496 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL res -1200 -256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res -1936 320 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL pmos -1728 304 M180
SYMATTR InstName M5
SYMATTR Value BSS84
SYMBOL pmos -1536 304 M180
SYMATTR InstName M12
SYMATTR Value BSS84
SYMBOL res -2576 -16 R0
SYMATTR InstName R19
SYMATTR Value 3
SYMBOL res -2432 -16 R0
SYMATTR InstName R20
SYMATTR Value 3
SYMBOL schottky -2192 -112 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value MBRS1100
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL cap -2256 -48 R0
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL res -2256 0 R0
SYMATTR InstName R21
SYMATTR Value 3
SYMBOL bv 128 736 R0
SYMATTR InstName B2
SYMATTR Value V=If(V(amp_raw)<0,0,IF(V(amp_raw)>5,5,V(amp_raw)))
SYMBOL schottky -1328 -464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value RB238T150
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res -1408 -752 R0
SYMATTR InstName R15
SYMATTR Value 32k
SYMBOL cap -256 96 R0
SYMATTR InstName C4
SYMATTR Value 10n
TEXT -1064 776 Left 2 !.tran 50m
TEXT 8080 24 Left 2 !*source LM2903B\n* PSpice Model Editor - Version 17.4.0\n*$\n* LM2903B\n*****************************************************************************\n* (C) Copyright 2019 Texas Instruments Incorporated. All rights reserved.\n*****************************************************************************\n** This model is designed as an aid for customers of Texas Instruments.\n** TI and its licensors and suppliers make no warranties, either expressed\n** or implied, with respect to this model, including the warranties of \n** merchantability or fitness for a particular purpose.  The model is\n** provided solely on an "as is" basis.  The entire risk as to its quality\n** and performance is with the customer.\n*****************************************************************************\n*\n* This model is subject to change without notice. Texas Instruments\n* Incorporated is not responsible for updating this model\n*\n*****************************************************************************\n*\n** Released by: Texas Instruments Inc.\n* Part: LM2903B\n* Date: 9/30/2021\n* Model Type: All In One\n* Simulator: PSPICE \n* Simulator Version: 17.4.0.p001\n* EVM Order Number: N/A \n* EVM Users Guide:  N/A \n* Datasheet: SCLS005AE - November 2020\n* Model Version: 1.0\n*\n*****************************************************************************\n*\n* Updates:\n*\n* Version 1.0 : Release to Web        \n*\n*****************************************************************************\n* Notes:\n* The following parameters are modeled: \n* Iq, tpd, Vcm, Vs, Vhys, Ib, Vos, \n* If either input goes beyond the recommended maximum range, the output will float to mid supply for the respective output\n* If the supply goes beyond the recommended maximum range, both outputs will float to mid supply\n*\n*****************************************************************************\n* source LM2903B\n.SUBCKT LM2903B IN+ IN- Vcc GND OUT   \nX_U4 N21103 N858868 Prop_Delay  \nX_U2 IN-BUFF IN+BUFF N21168 V+_BUFFER V-_BUFFER INPUTRANGE  \nX_U5 N21237 GND N21168 0 V+_BUFFER V-_BUFFER VCC N858872 OUT Output_Stage  \nX_U6 GND V+_BUFFER V-_BUFFER VCC Supply_Buffer  \nX_U3         N785573 IN-BUFF N21103 V+_BUFFER V-_BUFFER N852568 HPA_COMPHYS\nI_IS         N843683 GND DC 550u  \nX_U7 N21237 0 V+_BUFFER V-_BUFFER Supply_Enable  \nX_U1 IN+ IN+BUFF IN- IN-BUFF Input_Buffer  \nI_IBP         IN+ GND DC -3.5n  \nI_IBN         IN- GND DC -3.5n  \nV_VOS         N785573 IN+BUFF 0.37m\nR_RIS         N843683 VCC  1u TC=0,0 \nC_CINPL         GND IN+  0.5p  TC=0,0 \nC_CINNL         GND IN-  0.5p  TC=0,0 \nC_CINPH         IN+ VCC  0.5p  TC=0,0 \nC_CINNH         IN- VCC  0.5p  TC=0,0 \nV_VHYST         N852568 0 0\nE_E1         N858872 V-_BUFFER N858868 V-_BUFFER 2\n.ENDS\n \n.SUBCKT Input_Buffer IN+ IN+_BUFF IN- IN-_BUFF  \nX_U1         IN+ IN- IN+_BUFF IN-_BUFF SUPPLY_BUFFER1 \n.ENDS\n \n.SUBCKT Supply_Enable EN POR V+_BUFFER V-_BUFFER  \nX_U15         N780252 N780066 POR 1V 0 VCC_Range\nX_U13         V+_BUFFER V-_BUFFER N780066 1V 0 Difference\nV_VLOGIC         1V 0 1\nV_VS_MIN_SET         N780252 0 1.99\nX_U5         N780066 N779976 N780086 1V 0 VCC_Range\nV_VS_MAX_SET         N779976 0 36.01\nX_U16         N780086 POR EN 1V 0 ORGATE \n.ENDS\n \n.SUBCKT Supply_Buffer GND V+_BUFFER V-_BUFFER Vcc  \nX_U1         VCC GND V+_BUFFER V-_BUFFER SUPPLY_BUFFER1 \n.ENDS\n \n.SUBCKT Output_Stage EN GND IN_RANGE POR V+_BUFFER V-_BUFFER Vcc VIN VOUT  \nX_SMID    CONTROL_MID 0 N778484 MID Output_Stage_SMID \nX_U3         VIN N774212 V+_BUFFER V-_BUFFER VCC N774290 DIGLEVSHIFT\nX_U7         MID V+_BUFFER V-_BUFFER MID_SUPPLY\nV_VLOGIC         1V 0 1\nV_V1         VCC N774290 1\nX_SHIZ    CONTROL_HIZ 0 N778484 N778496 Output_Stage_SHIZ \nX_U8          POR IN_RANGE EN EN CONTROL_HIZ 1V 0 4ORGATE\nX_U9         CONTROL_HIZ N789513 1V 0 INVERTER\nX_U10         N789513 POR CONTROL_MID 1V 0 ORGATE \nL_L1         N778484 VOUT  1n  \nC_COUTH         VOUT VCC  0.5p  TC=0,0 \nC_COUTL         GND VOUT  0.5p  TC=0,0 \nX_SVOL    N774212 N774290 GND N850209 Output_Stage_SVOL \nR_ROUTL         N850209 N778496  60 TC=0,0 \n.ENDS\n \n.SUBCKT INPUTRANGE INN INP INRANGE V+_BUFFER V-_BUFFER  \nV_VCMNP         N20415 V-_BUFFER -110m\nV_VCMPN         N202710 V+_BUFFER -2\nX_U1         N20155 INP N20826 V+_BUFFER V-_BUFFER VINRANGE_393\nV_VCMPP         N20155 V+_BUFFER -2\nV_VCMNN         N20539 V-_BUFFER -110m\nX_U21         N202710 INN N20833 V+_BUFFER V-_BUFFER VINRANGE_393\nX_U22         INP N20415 N20840 V+_BUFFER V-_BUFFER VINRANGE_393\nX_U23         INN N20539 N20531 V+_BUFFER V-_BUFFER VINRANGE_393\nX_U24         N20826 N20833 N20840 N20531 INRANGE V+_BUFFER V-_BUFFER 4ORGATE \n.ENDS\n \n.SUBCKT Prop_Delay VIN VOUT  \nT_TPD         N03175 0 VOUT 0 Z0=50 TD=1.22u  \nR_RT         0 VOUT  50 TC=0,0 \nR_RS         N03175 VIN  50 TC=0,0 \n.ENDS\n \n.subckt Output_Stage_SMID 1 2 3 4  \nS_SMID         3 4 1 2 _SMID\nRS_SMID         1 2 1G\n.MODEL         _SMID VSWITCH Roff=1e12 Ron=1.0 Voff=1 Von=0\n.ends Output_Stage_SMID\n \n.subckt Output_Stage_SHIZ 1 2 3 4  \nS_SHIZ         3 4 1 2 _SHIZ\nRS_SHIZ         1 2 1G\n.MODEL         _SHIZ VSWITCH Roff=1e12 Ron=1.0 Voff=1 Von=0\n.ends Output_Stage_SHIZ\n \n.subckt Output_Stage_SVOL 1 2 3 4  \nS_SVOL         3 4 1 2 _SVOL\nRS_SVOL         1 2 1G\n.MODEL         _SVOL VSWITCH Roff=1e12 Ron=1.0 Voff=1 Von=0\n.ends Output_Stage_SVOL\n \n.SUBCKT ANDGATE 1 2 3 VDD VSS\nE1 4 0 VALUE = { IF( ((V(1)> (V(VDD)+V(VSS))/2 ) & (V(2)> (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }\nR1 4 3 1\nC1 3 0 1e-12\n.ENDS\n*$\n.SUBCKT HPA_COMPHYS INP INN OUT_OUT VDD VSS VHYS\nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEVH VH 0 VALUE = { ( V(VHYS)/2) }\nEINNNEW INNNEW 0 VALUE = { IF( ( V(OUT_OUT) < V(VMID) ),(V(INN) + (V(VH))),( V(INN) - V(VH) ) ) }\nEOUT OUT 0 VALUE = { IF( ( V(INP) > V(INNNEW) ), V(VDD), V(VSS) ) }\nR1 OUT OUT_OUT 1\nC1 OUT_OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT DIGLEVSHIFT 1 2 VDD_OLD VSS_OLD VDD_NEW VSS_NEW\n*E1 3 0 VALUE = { IF( V(1) < (V(VDD_OLD)+V(VSS_OLD))/2, V(VSS_NEW), V(VDD_NEW) ) }\n \nE1 3 0 VALUE = { IF( V(1) < 1, V(VSS_NEW), V(VDD_NEW) ) }\n \nR1 3 2 1\n*C1 2 0 1e-12\n.ENDS\n*$\n.SUBCKT ENABLE_LOGIC 1 2 OUT VDD VSS \nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEOUT OUT 0 VALUE = { IF( ( V(1) > V(VMID) ), V(2), V(VSS) ) }\nR1 OUT 2 1\nC1 2 0 1e-12\n.ENDS\n*$\n.SUBCKT ENABLE_TLV7021 1 2 3 OUT VDD VSS \nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEOUT OUT2 0 VALUE = { IF( ( V(1) > V(VMID) ), V(2), V(3) ) }\nR1 OUT2 OUT 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT INNNEWPOR 1 2 3 OUT VDD VSS \nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEOUT OUT2 0 VALUE = { IF( ( V(1) < V(VMID) ), V(VSS), V(VDD) ) }\nR1 OUT2 OUT 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT INPNEWPOR 1 2 3 OUT VDD VSS \nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEOUT OUT2 0 VALUE = { IF( ( V(1) < V(VMID) ), V(VDD), V(VSS) ) }\nR1 OUT2 OUT 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT VIN_INV 1 2 VDD VSS\nE2 2 0 VALUE = { IF( V(1)> (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }\nC1 2 0 1e-12\n.ENDS\n*$\n.SUBCKT INVERTER 1 2 VDD VSS\nE2 2 0 VALUE = { IF( V(1)> (V(VDD)+V(VSS))/2, V(VSS), V(VDD) ) }\nC1 1 0 1e-12\n.ENDS\n*$\n.SUBCKT MID_SUPPLY OUT VDD VSS\nEVMID VMID 0 VALUE = { ( V(VDD) + V(VSS) )/2 }\nEOUT OUT 0 VALUE = {V(VMID)}\n.ENDS\n*$\n.SUBCKT ORGATE 1 2 3 VDD VSS\nE1 4 0 VALUE = { IF( ((V(1)< (V(VDD)+V(VSS))/2 ) & (V(2)< (V(VDD)+V(VSS))/2 )), V(VSS), V(VDD) ) }\nR1 4 3 1\nC1 3 0 1e-12\n.ENDS\n*$\n.SUBCKT NOR_GATE 1 2 OUT VDD VSS\nEOUT OUT 0 VALUE = { IF( ((V(1)< (V(VDD)+V(VSS))/2 ) & (V(2)< (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }\nR1 OUT 2 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT ORGATE1701 1 2 3 4 OUT VDD VSS\nEOUT OUT 0 VALUE = { IF( ((V(1)< (V(VDD)+V(VSS))/2 ) & (V(2)< (V(VDD)+V(VSS))/2 )), V(3), V(4) ) }\n.ENDS\n*$\n.SUBCKT PORCHECK 1 2 OUT VDD VSS \nEOUT OUT 0 VALUE = { IF( ( V(2) < V(1) ), V(VSS), V(VDD) ) }\nR1 OUT 2 1\nC1 2 0 1e-12\n.ENDS\n*$\n.SUBCKT Difference 1 2 OUT VDD VSS \nEOUT OUT1 0 VALUE = { V(1)- V(2)}\nR1 OUT1 OUT 1\n*C1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT SUPPLY_BUFFER1 1 2 VDD_NEW VSS_NEW \nEVDD_NEW VDD_NEW 0 VALUE = {V(1)}\nEVSS_NEW VSS_NEW 0 VALUE = {V(2)}\n.ENDS\n*$\n.SUBCKT VCC_Range 1 2 OUT VDD VSS \nEOUT OUT2 0 VALUE = { IF( ( V(1) >= V(2) ), V(VDD), V(VSS) ) }\nR1 OUT OUT2 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT VINRANGE_393 1 2 OUT VDD VSS \nEOUT OUT2 0 VALUE = { IF( ( V(1) >= V(2) ), V(VSS), V(VDD) ) }\nR1 OUT2 OUT 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.subckt SHUTDOWNCURRENT SHUTDOWN 2 3 OUT VDD VSS\nEOUT OUT2 0 VALUE = {IF ((V(SHUTDOWN) > (V(VSS) + 0.4)), V(2), V(3))}\nR1 OUT OUT2 1\nC1 OUT 0 1e-12 \n.ENDS\n*$\n.subckt SHUTDOWNOUTPUT DISABLE ENABLE SHUTDOWN  VSS OUT\nEOUT OUT 0 VALUE = {IF ((V(SHUTDOWN) <= (V(VSS) + 0.4)), V(DISABLE), V(ENABLE))}\nC1 OUT 0 1e-12\n.ENDS\n*$\n.SUBCKT NORGATE 1 2 OUT VDD VSS\nEOUT OUT2 0 VALUE = { IF( ((V(1)< (V(VDD)+V(VSS))/2 ) & (V(2)< (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }\nR1 OUT2 OUT 1\nC1 OUT 0 1e-12\n.ENDS\n*$\n.MODEL NPN1 NPN LEVEL=1 IS=1E-16 RB=850 RC=1 TF=5n \n*$\n.MODEL PNP1 PNP LEVEL=1 IS=1E-16 RB=850 RC=1 TF=5n \n*$\n.SUBCKT LE_HYST LEHYST V- V-_BUF V+_BUF LATCH_OUT HYST_OUT\nV_VLATCH         N00729 V- 1.25\nR_RPU         N00729 LEHYST  40k TC=0,0 \nE_EIN         VLE V-_BUF LEHYST V- 1\nR_R1         V-_BUF LATCH_OUT  1k TC=0,0 \nR_R2         V-_BUF VLE  1k TC=0,0\nR_R3         V-_BUF HYST_OUT  1k TC=0,0  \nE_ELATCH   LATCH_OUT V-_BUF VALUE = { IF( V(VLE)<= 0.4, 0, 5 ) }\n*E_EHYST     HYST_OUT V-_BUF VALUE = { IF( V(VLE)<= 1.25,V(VLE),0 ) }\nE_EHYST     HYST_OUT V-_BUF TABLE {V(VLE)} = (0.4,0)\n+(0.5,0.0636)\n+(0.55,0.0636)\n+(0.6,0.0636)\n+(0.65,0.0636)\n+(0.7,0.0635)\n+(0.71,0.0636)\n+(0.72,0.0635)\n+(0.73,0.0636)\n+(0.74,0.0634)\n+(0.75,0.0635)\n+(0.76,0.0638)\n+(0.77,0.0637)\n+(0.78,0.0637)\n+(0.79,0.0637)\n+(0.8,0.0636)\n+(0.81,0.0636)\n+(0.82,0.0636)\n+(0.83,0.0636)\n+(0.84,0.0425)\n+(0.85,0.0411)\n+(0.86,0.0398)\n+(0.87,0.0386)\n+(0.88,0.0371)\n+(0.89,0.0359)\n+(0.9,0.0347)\n+(0.91,0.0334)\n+(0.92,0.032)\n+(0.93,0.0309)\n+(0.94,0.0296)\n+(1,0.0223)\n+(1.05,0.0164)\n+(1.1,0.0108)\n+(1.15,0.0056)\n+(1.2,0.0007)\n+(1.25,0)\n.ENDS\n*$\n* \n.SUBCKT IS_SET VCC VEE DISABLE VIEN VIDIS PBAD\nGIS VCC1 VEE VALUE = { IF ( (V(PBAD) > 2.5V) , 1u , IF ( V(DISABLE) > 2.5, V(VIEN), V(VIDIS) ) ) }\nRIS VCC1 VCC 1\n*RIS2 VCC VEE 100000000\n.ENDS\n*$\n \n.SUBCKT 4ORGATE 1 2 3 4 5 VDD VSS\nE1 6 0 VALUE = { IF( ((V(1)> (V(VDD)+V(VSS))/2 ) | (V(2)> (V(VDD)+V(VSS))/2 ) | (V(3)> (V(VDD)+V(VSS))/2 ) | (V(4)> (V(VDD)+V(VSS))/2 )), V(VDD), V(VSS) ) }\nR1 5 6 1\n.ENDS\n*$
TEXT 1856 -536 Left 2 !.model MYSW SW(Ron=.1m Roff=1Meg Vt = .5 Vh = -.4)
TEXT 1856 -568 Left 2 !.model Didl D(Ron=.001 Roff=1Meg Vfwd=110 Vrev=200)
TEXT 2440 -408 Left 2 !.param start_res=100
TEXT 2448 -368 Left 2 !.param end_res 1
TEXT -3000 160 Left 2 !.param FREQ = 500000
TEXT -3000 136 Left 2 !.param t_edge=.1u
